<div class="container-fluid mt-2" style="width: 95%;">
    <h2>Pedidos</h2>
  
    <div class="d-flex justify-content-between mb-3">
      <button (click)="toggleForm()" class="btn btn-success">
        <i class="fa-solid fa-plus"></i> Registrar Pedido
      </button>
    </div>
  
    <table class="table table-striped table-bordered">
      <thead class="table-dark">
        <tr>
          <th>#</th>
          <th>ID Cliente</th>
          <th>ID Producto</th>
          <th>Total</th>
          <th>Estatus</th>
          <th>Opciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let pedido of pedidos; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ pedido.idCliente }}</td>
          <td>{{ pedido.idProducto }}</td>
          <td>{{ pedido.total | currency }}</td>
          <td>
            {{
              pedido.idEstatus === 1 ? 'Pendiente' :
              pedido.idEstatus === 2 ? 'Enviado' :
              pedido.idEstatus === 3 ? 'Entregado' :
              pedido.idEstatus === 4 ? 'Cancelado' : 'Desconocido'
            }}
          </td>          
          <td>
            <button class="btn btn-primary btn-sm me-1" (click)="editPedido(pedido)">
              <i class="fa fa-edit"></i> Editar
            </button>
            <button class="btn btn-danger btn-sm" (click)="eliminarPedido(pedido)" [disabled]="eliminandoId === pedido.id">
              <ng-container *ngIf="eliminandoId !== pedido.id">
                <i class="fa fa-trash"></i> Eliminar
              </ng-container>
              <ng-container *ngIf="eliminandoId === pedido.id">
                <span class="spinner-border spinner-border-sm"></span> Eliminando...
              </ng-container>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  
    <!-- FORMULARIO -->
    <form [formGroup]="pedidoForm" (ngSubmit)="onSubmit()" *ngIf="showForm">
      <h4>{{ textoModal }}</h4>
    
      <div class="form-group mb-2">
        <label>Cliente:</label>
        <select class="form-control" formControlName="idCliente">
          <option *ngFor="let cliente of clientes" [value]="cliente.id">
            {{ cliente.nombre }} {{ cliente.apellido }}
          </option>
        </select>
      </div>
    
      <div class="form-group mb-2">
        <label>Productos:</label>
        <select multiple class="form-control" formControlName="idProducto">
          <option *ngFor="let producto of productos" [value]="producto.id">
            {{ producto.nombre }}
          </option>
        </select>
      </div>
    
      <div class="form-group mb-2">
        <label>Estatus:</label>
        <select class="form-control" formControlName="idEstatus">
          <option [value]="1">Pendiente</option>
          <option [value]="2">Enviado</option>
          <option [value]="3">Entregado</option>
        </select>
      </div>
    
      <button class="btn btn-success" type="submit" [disabled]="pedidoForm.invalid || guardando">
        <ng-container *ngIf="!guardando">
          <i class="fa fa-save"></i> Guardar
        </ng-container>
        <ng-container *ngIf="guardando">
          <span class="spinner-border spinner-border-sm"></span> Guardando...
        </ng-container>
      </button>
    </form>
    
  </div>
  